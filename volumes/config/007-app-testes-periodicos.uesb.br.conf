
<VirtualHost *:443>
    ServerName app-testes-periodicos.uesb.br

    # Logs
    ErrorLog /var/log/apache2/periodicos2-error.log
    CustomLog /var/log/apache2/periodicos2.log combined

    # Configura    es SSL
    SSLEngine on
    SSLCertificateFile /data/certs/letsencrypt/live/uesb.br/fullchain.pem
    SSLCertificateKeyFile /data/certs/letsencrypt/live/uesb.br/privkey.pem
    SSLCertificateChainFile /data/certs/letsencrypt/live/uesb.br/chain.pem
    SSLProtocol all -SSLv2 -SSLv3
    SSLCipherSuite HIGH:!aNULL:!MD5

    # Configura    es de Proxy
    SSLProxyEngine On
    ProxyRequests Off
    ProxyPreserveHost On
    ProxyPass / http://ojs-periodicos:80/
    ProxyPassReverse / http://ojs-periodicos:80/

    # Headers de seguran  a
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"

    # Timeout aumentado
    Timeout 3600
    ProxyTimeout 3600
</VirtualHost>
